# Generate Node

ä¸€ä¸ªåŸºäº Monorepo æ¶æ„çš„çµæ´»ä»£ç ç”Ÿæˆå·¥å…·ï¼Œæ”¯æŒå¯é…ç½®çš„æ¨¡ç‰ˆå’Œè®¾ç½®ã€‚

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
OA_generate_node/
â”œâ”€â”€ packages/
â”‚   â””â”€â”€ core/                 # æ ¸å¿ƒä»£ç ç”ŸæˆåŒ…
â”‚       â”œâ”€â”€ lib/              # æ ¸å¿ƒåº“ä»£ç 
â”‚       â”‚   â”œâ”€â”€ index.js      # ä¸»å…¥å£æ–‡ä»¶
â”‚       â”‚   â”œâ”€â”€ generator.js  # ä»£ç ç”Ÿæˆå™¨
â”‚       â”‚   â”œâ”€â”€ cli.js        # CLIå·¥å…·
â”‚       â”‚   â”œâ”€â”€ config/       # é…ç½®ç®¡ç†
â”‚       â”‚   â”œâ”€â”€ template/     # æ¨¡ç‰ˆå¼•æ“
â”‚       â”‚   â””â”€â”€ utils/        # å·¥å…·ç±»
â”‚       â”œâ”€â”€ examples/         # é…ç½®å’Œæ¨¡ç‰ˆç¤ºä¾‹
â”‚       â”œâ”€â”€ package.json      # åŒ…é…ç½®
â”‚       â””â”€â”€ README.md         # åŒ…æ–‡æ¡£
â”œâ”€â”€ examples/                 # å®Œæ•´ä½¿ç”¨ç¤ºä¾‹
â”‚   â”œâ”€â”€ config/               # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ template/             # æ¨¡ç‰ˆæ–‡ä»¶
â”‚   â”œâ”€â”€ modules.json          # æ¨¡å—é…ç½®
â”‚   â”œâ”€â”€ task.yml              # ä»»åŠ¡é…ç½®
â”‚   â”œâ”€â”€ main.js               # ç¤ºä¾‹ä¸»æ–‡ä»¶
â”‚   â””â”€â”€ package.json          # ç¤ºä¾‹åŒ…é…ç½®
â”œâ”€â”€ pnpm-workspace.yaml       # pnpm workspace é…ç½®
â””â”€â”€ README.md                 # é¡¹ç›®æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pnpm install
```

### 2. è¿è¡Œç¤ºä¾‹

```bash
cd examples
pnpm start
```

### 3. å®‰è£…æ ¸å¿ƒåŒ…

```bash
pnpm add @generate_node/core
```

## ğŸ“¦ åŒ…è¯´æ˜

### @generate_node/core

æ ¸å¿ƒä»£ç ç”ŸæˆåŒ…ï¼Œæä¾›ï¼š

- **OAGenerator**: ä¸»è¦çš„ä»£ç ç”Ÿæˆå™¨ç±»
- **ConfigManager**: é…ç½®ç®¡ç†å™¨
- **TemplateEngine**: æ¨¡ç‰ˆå¼•æ“
- **FileUtils**: æ–‡ä»¶å·¥å…·ç±»
- **CLIå·¥å…·**: å‘½ä»¤è¡Œæ¥å£

### examples

å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ï¼š

- é…ç½®é¡¹ç›®
- å®šä¹‰æ¨¡ç‰ˆ
- ç”Ÿæˆä»£ç 
- è‡ªå®šä¹‰è¾“å‡º

## ğŸ¯ è®¾è®¡ç†å¿µ

### å…³æ³¨ç‚¹åˆ†ç¦»

- **æ ¸å¿ƒåŠŸèƒ½**: åœ¨ `packages/core` ä¸­ï¼Œä½œä¸ºç‹¬ç«‹çš„npmåŒ…
- **é…ç½®æ–‡ä»¶**: åœ¨ç”¨æˆ·é¡¹ç›®ä¸­ï¼Œæ”¯æŒè‡ªå®šä¹‰é…ç½®
- **æ¨¡ç‰ˆæ–‡ä»¶**: åœ¨ç”¨æˆ·é¡¹ç›®ä¸­ï¼Œæ”¯æŒè‡ªå®šä¹‰æ¨¡ç‰ˆ
- **ç¤ºä¾‹ä»£ç **: åœ¨ `examples` ä¸­ï¼Œå±•ç¤ºæœ€ä½³å®è·µ

### çµæ´»é…ç½®

- **å¤–éƒ¨é…ç½®**: é…ç½®æ–‡ä»¶ä¸æ‰“åŒ…åœ¨æ ¸å¿ƒåŒ…å†…
- **æ¨¡ç‰ˆåˆ†ç¦»**: æ¨¡ç‰ˆæ–‡ä»¶ä¸æ‰“åŒ…åœ¨æ ¸å¿ƒåŒ…å†…
- **è·¯å¾„é…ç½®**: æ”¯æŒè‡ªå®šä¹‰é…ç½®å’Œæ¨¡ç‰ˆè·¯å¾„
- **æ¨¡å—åŒ–**: æ”¯æŒæŒ‰æ¨¡å—ç”Ÿæˆä»£ç 

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### ç¼–ç¨‹å¼ä½¿ç”¨

```javascript
import { OAGenerator } from '@oa_generate_node/core';

const generator = new OAGenerator({
  configPath: './config',
  templatePath: './template',
  outputPath: './output'
});

await generator.generate();
```

### CLIä½¿ç”¨

```bash
# ç”Ÿæˆä»£ç 
oa-generate generate -c ./config -t ./template -o ./output

# æŒ‡å®šæ¨¡å—
oa-generate generate -m backend,frontend

# åˆå§‹åŒ–é¡¹ç›®
oa-generate init
```

## ğŸ“‹ é…ç½®æ–‡ä»¶

### ä¸»é…ç½®æ–‡ä»¶ (main_config.json)

å®šä¹‰è¡¨å•å­—æ®µã€å·¥å…·æŒ‰é’®ã€è¡¨æ ¼åˆ—ç­‰åŸºç¡€é…ç½®ã€‚

### æ¨¡å—é…ç½®æ–‡ä»¶ (modules.json)

å®šä¹‰æ¨¡å—çš„é…ç½®æ–‡ä»¶åˆ—è¡¨å’Œæ¨¡ç‰ˆåˆ—è¡¨ã€‚

### ä»»åŠ¡é…ç½®æ–‡ä»¶ (task.yml)

å®šä¹‰å“ªäº›æ¨¡å—éœ€è¦ç”Ÿæˆä»£ç ã€‚

## ğŸ¨ æ¨¡ç‰ˆç³»ç»Ÿ

- **EJSæ¨¡ç‰ˆå¼•æ“**: æ”¯æŒæ¡ä»¶æ¸²æŸ“ã€å¾ªç¯æ¸²æŸ“ã€å˜é‡æ›¿æ¢
- **å†…ç½®å·¥å…·å‡½æ•°**: æä¾›å¸¸ç”¨çš„å­—ç¬¦ä¸²è½¬æ¢å‡½æ•°
- **æ¨¡ç‰ˆç¼“å­˜**: æé«˜æ¸²æŸ“æ€§èƒ½
- **å¤šæ‰©å±•åæ”¯æŒ**: æ”¯æŒ .ejsã€.htmlã€.htm æ–‡ä»¶

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `packages/core/lib` ä¸­æ·»åŠ æ–°çš„æ¨¡å—
2. åœ¨ `packages/core/lib/index.js` ä¸­å¯¼å‡ºæ–°æ¨¡å—
3. åœ¨ `examples` ä¸­æ·»åŠ ä½¿ç”¨ç¤ºä¾‹
4. æ›´æ–°æ–‡æ¡£

### å‘å¸ƒåŒ…

```bash
cd packages/core
npm publish
```